---
layout: post
title: "Codex 使用体验"
aliases:
- "Codex 使用体验"
tagline: ""
description: ""
category: 产品体验
tags: [ codex, code, openai, gemini, claude-code, ]
create_time: 2025-09-24 11:00:28
last_updated: 2025-09-24 11:00:28
dg-home: false
dg-publish: false
---

## Codex 简介

**Codex** 是由 OpenAI 开发的基于 GPT 模型，专门用于理解和生成代码的 AI Agent。它在自然语言和多种编程语言之间架起了一座桥梁，能够根据人类的文字描述自动生成可执行代码、补全代码片段以及解释代码含义。

在我之前的文章中已经分享了大量的 Claude Code 使用体验，以及 Claude Code 相关的辅助工具，而在代码 Agent 方面，OpenAI 也是突飞猛进，之前只有高级付费用户才能使用的 Codex，现在也开放给了 Plus 用户，无需 API ，直接登录就能使用。Codex 在代码生成能力上还是有提升的。那么接下来我们就介绍一下 Codex 的使用体验。

如果还没有 ChatGPT 帐号，可以直接去官网注册，或者可以联系我，我使用 [[claude relay service]] 自己转发了一下 Claude Code 和 Codex。

## 核心特点

- 多语言支持 Codex 对多达 12 种主流编程语言具有良好支持，涵盖 Python、JavaScript、TypeScript、Go、Ruby、Java、PHP、C#、C++、Shell、HTML／CSS 及 SQL 等。
- 用户只需用自然语言描述想要实现的功能，Codex 即可生成对应的代码片段。例如，输入“用 Python 写一个计算斐波那契数列的函数”，它便能输出完整函数实现。

- 代码补全与重构 在集成开发环境（IDE）或编辑器中，Codex 可实时提供智能补全建议，不仅仅是补全单个变量名或函数，还能补全整个逻辑块，并支持重构与优化已有代码。
- 文档与注释生成 Codex 能根据代码自动生成文档注释（docstring）和使用示例，帮助开发者提高代码可读性与可维护性。
- API 与工具链集成 通过 OpenAI 提供的 API，开发者可将 Codex 嵌入自己的应用或插件中。目前已有 VS Code 插件（GitHub Copilot）等成熟集成方案，方便直接在日常开发工作流中使用。

## 费用

Codex 仅向以下用户开放使用

- ChatGPT Plus 20 美元/月
- ChatGPT Pro 用户（200 美元/月）
- ChatGPT Enterprise 用户
- ChatGPT Team 用户

如果没有直接付费订阅，也可以直接通过付费 API 的方式使用 Codex，可以通过 codex 配置文件中的 `preferred_auth_method` 配置来使用 API。

## 安装

```
npm i -g @openai/codex
```

安装完成之后可以直接运行 `codex` 进入。

相关的配置文件，默认的配置文件在 `~/.codex/config.toml`

Codex 默认使用的是 gpt-5-codex 代码专用的模型，推理级别是中等。在代码方面比 gpt-5 强。可以通过 `/model` 来切换模型。

三种模式

| 权限项             | Auto（默认） | Read Only | Full Access |
| ------------------ | ------------ | --------- | ----------- |
| 读取文件           | ✅           | ✅        | ✅          |
| 编辑文件           | ✅           | ❌        | ✅          |
| 在工作目录运行命令 | ✅           | ❌        | ✅          |
| 访问工作目录外文件 | ❌（需确认） | ❌        | ✅          |
| 访问网络           | ❌（需确认） | ❌        | ✅          |

通过命令的 flags 参数控制

| 模式                               | 标志                                                           | 说明                                                                                   |
| ---------------------------------- | -------------------------------------------------------------- | -------------------------------------------------------------------------------------- |
| 自动（默认）                       | 无需标志，默认值                                               | Codex 可以读取文件、编辑文件并在工作区运行命令。Codex 在运行沙箱外的命令时会请求批准。 |
| 只读                               | `--sandbox read-only --ask-for-approval never`                 | Codex 只能读取文件；从不请求批准。                                                     |
| 自动编辑，但运行不可信命令时需批准 | `--sandbox workspace-write --ask-for-approval untrusted`       | Codex 可以读取和编辑文件，但在运行不可信命令之前会请求批准。                           |
| 危险的完全访问                     | `--dangerously-bypass-approvals-and-sandbox`（别名：`--yolo`） | 无沙箱、无批准（不推荐）。                                                             |

这样，在启动 CodeX 的时候通过指定 Flags 参数就能使用指定的授权模式了。

### 几种运行方式

- 最基础的，就是直接运行 codex，交互式运行
- 也可以将问题直接放到命令行，`codex "解释这个代码仓库在做什么"`
- 全自动执行模式，`codex --full-auto "生成一个简单的待办应用并跑起来"`
- 指定模型，设定推理等，最大化推理和自动执行 `codex -m gpt-5-codex -c model_reasoning_effort="high" --search --dangerously-bypass-approvals-and-sandbox`

## 常用命令

```
/model 切换模型
/approvals  切换 Codex 可以执行的操作，只读，部分修改，还是完全授权
/review review 当前的修改
/new 开启新的对话
/init 创建 AGENTS.md 文件
/compact 压缩对话
/diff 展示 git diff
/mention 指定文件
/status 查看当前会话的配置和 token usage
/mcp 配置 MCP
/logout 退出
```

一些常用的快捷键

- 可以使用 Control + J 换行，但是不提交，如果提示词太长，可以换行
- 可以使用 Esc 或 Control C 来中断当前的请求

## 功能

### 自主执行

Codex 可以像 Claude Code 一样长时间自主完成工作，根据任务的复杂程度可以连续运行数小时。Codex 基于 GPT-5 模型动态思考，Codex 具备任务规划，执行监控，错误处理，结果验证的能力。

## 使用建议

1. **精细化提示**，提供明确的功能描述、输入输出要求、边界条件等，提升生成代码的准确度。
2. **分步骤迭代**，如果中间结果不满意，可以补充约束再运行
3. **审慎验证**，对自动生成的代码进行静态分析、安全审计和单元测试，确保质量与安全。
4. **结合人类复审**，将 Codex 作为开发助理，而非完全替代，开发者应保留最终的设计与实现控制权。
5. 对于敏感的数据，可以现在沙箱中验证，确定无误之后再进行修改，确保安全
